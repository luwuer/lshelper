(function(t,l){typeof exports=="object"&&typeof module<"u"?l(exports):typeof define=="function"&&define.amd?define(["exports"],l):(t=typeof globalThis<"u"?globalThis:t||self,l(t.LsHelper={}))})(this,function(t){"use strict";var S=Object.defineProperty;var b=(t,l,c)=>l in t?S(t,l,{enumerable:!0,configurable:!0,writable:!0,value:c}):t[l]=c;var d=(t,l,c)=>b(t,typeof l!="symbol"?l+"":l,c);class l{constructor(){d(this,"cache",{});this.cache={}}save(){this.cache={...localStorage}}clear(){localStorage.clear()}saveAndClear(){this.save(),this.clear()}restore(){for(const e in this.cache)localStorage.setItem(e,this.cache[e])}}function c(o){let e=0;for(let a=0;a<o.length;a++)o.charCodeAt(a)<=65535?e+=2:e+=4;return e}const g=new Array(1024).fill("-").join(""),s=new Array(64).fill(g).join(""),r="t";function f(){let o=0,e=s.slice(r.length);function a(){try{e+=s,localStorage.setItem(r,e),a()}catch{localStorage.removeItem(r),o=c(e.slice(s.length)+r),console.log(`Local storage overflow, max size: ${o/1024/1024}Mb`)}}const n=new l;return n.saveAndClear(),a(),n.restore(),o}function h(){let o=0;return Object.keys(localStorage).forEach(e=>{o+=c(e),o+=c(localStorage.getItem(e)||"")}),o}function y(){let o=f(),e=h(),a=o-e,n=0,i=0;return Object.keys(localStorage).forEach(u=>{n+=c(u),i+=c(localStorage.getItem(u)||"")}),{total:o,used:e,free:a,usedKey:n,usedContent:i}}t.curSize=h,t.size=f,t.stat=y,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})});
